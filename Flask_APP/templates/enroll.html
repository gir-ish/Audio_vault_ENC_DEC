<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enroll Your Voice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .question-block {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
        }
        .question-block h3 {
            margin-top: 0;
        }
        button {
            margin-right: 10px;
            margin-top: 10px;
        }
        .transcription {
            margin-top: 10px;
            color: green;
        }
        .error {
            margin-top: 10px;
            color: red;
        }
        .counter {
            margin-top: 10px;
            font-weight: bold;
        }
        #controls {
            margin-bottom: 20px;
        }
        .recording-list {
            margin-top: 10px;
        }
        .recording-item {
            border-top: 1px dashed #ccc;
            padding-top: 5px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    
    <h1>Enroll Your Voice</h1>
    <p><strong>Username:</strong> <span id="username">{{ user_id }}</span></p>
    <div id="controls">
        <button id="loadQuestions">Load Questions</button>
        <button id="reloadQuestions" disabled>Reload Questions</button>
        <button id="cancelEnrollment">Cancel Enrollment</button>
    </div>
    <div id="questionsContainer" style="display:none;">
        <div id="question1" class="question-block">
            <h3>Question 1</h3>
            <p id="q1"></p>
            <button onclick="startRecording(1)" id="startBtn1" disabled>Start Recording</button>
            <button onclick="stopRecording(1)" id="stopBtn1" disabled>Stop Recording</button>
            <button onclick="submitRecording(1)" id="submitBtn1" disabled>Submit</button>
            <button onclick="reRecord(1)" id="reRecordBtn1" disabled>Re-record</button>
            <p id="transcript1" class="transcription"></p>
            <p id="error1" class="error"></p>
            <p id="counter1" class="counter">Attempts: 0/3</p>
            <div class="recording-list" id="recordingList1">
                <!-- Existing recordings will be listed here -->
            </div>
        </div>
        <div id="question2" class="question-block">
            <h3>Question 2</h3>
            <p id="q2"></p>
            <button onclick="startRecording(2)" id="startBtn2" disabled>Start Recording</button>
            <button onclick="stopRecording(2)" id="stopBtn2" disabled>Stop Recording</button>
            <button onclick="submitRecording(2)" id="submitBtn2" disabled>Submit</button>
            <button onclick="reRecord(2)" id="reRecordBtn2" disabled>Re-record</button>
            <p id="transcript2" class="transcription"></p>
            <p id="error2" class="error"></p>
            <p id="counter2" class="counter">Attempts: 0/3</p>
            <div class="recording-list" id="recordingList2">
                <!-- Existing recordings will be listed here -->
            </div>
        </div>
        <div id="question3" class="question-block">
            <h3>Question 3</h3>
            <p id="q3"></p>
            <button onclick="startRecording(3)" id="startBtn3" disabled>Start Recording</button>
            <button onclick="stopRecording(3)" id="stopBtn3" disabled>Stop Recording</button>
            <button onclick="submitRecording(3)" id="submitBtn3" disabled>Submit</button>
            <button onclick="reRecord(3)" id="reRecordBtn3" disabled>Re-record</button>
            <p id="transcript3" class="transcription"></p>
            <p id="error3" class="error"></p>
            <p id="counter3" class="counter">Attempts: 0/3</p>
            <div class="recording-list" id="recordingList3">
                <!-- Existing recordings will be listed here -->
            </div>
        </div>
        <button id="finishEnrollment" disabled onclick="finishEnrollment()">Finish Enrollment</button>
    </div>

    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>
